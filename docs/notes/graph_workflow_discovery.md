# Graph workflow discovery (train/eval over time)

## Summary
This repo does not contain a native plotting/graphing pipeline. The likely “success rate vs epoch” data is emitted by **external training binaries** (referenced via `../../../classifier/...`) and by local benchmarking tools (notably `cmd/backtest`). The in-repo workflow is a **three-step preprocessing chain** plus **model training**, all wired through shell scripts under `cmd/analysis2/`.

## Candidate workflows
### 1) Dictionary preprocessing + training (core pipeline)
From `cmd/analysis2/*.sh` and `doc/README.md`:
1. **Grammar induction**: `cmd/analysis2/study_language.sh`
   - Runs `analysis2` with `--lang dicts/<lang>/language.json --srcfile dicts/<lang>/lexicon.tsv` and writes updated language rules.
2. **Data alignment**: `cmd/analysis2/clean_language.sh`
   - Writes `dicts/<lang>/clean.tsv` and runs `dicttomap` to update language mapping.
3. **Model training**: `cmd/analysis2/train_language.sh`
   - Executes external binary `../../../classifier/cmd/train_phonemizer_ulevel/train_phonemizer_ulevel`.
   - Outputs `dicts/<lang>/weights6.json.zlib`.

These scripts are orchestrated by `cmd/analysis2/train_languages.sh` and `cmd/analysis2/train_languages_reverse.sh`.

### 2) Backtesting / evaluation
`cmd/backtest/main.go` reads dictionary TSV and models, runs evaluation, and prints:
```
[success rate] <percent> % with <errors> errors <successes> successes for <lang>
```
It can watch model files and write “best” snapshots when invoked with testing flags.

## Outputs / logs
- **Training output logs**: emitted by the external trainer binary, not in this repo.
- **Evaluation output**: `cmd/backtest` prints success rate lines to stdout.
- **Static summary files**: `success_forward.txt` and `success_reverse.txt` in repo appear to be captured output (not generated by code here).

## Inputs
- `dicts/<lang>/lexicon.tsv` (word <TAB> IPA <TAB> optional tags) for analysis/training
- `dicts/<lang>/clean.tsv` produced by `clean_language.sh`
- `dicts/<lang>/language.json` / `language_reverse.json`
- `dicts/<lang>/weights6.json.zlib` produced by training
- Optional: `dicts/<lang>/missing.tsv`/`missing_reverse.tsv` and `missing.all.zlib` used by runtime lookup/backtest

## Plotting
No plotting utilities are present in this repo. The graphing likely occurs externally (e.g., in the classifier repo or a separate analysis environment). In this repo, only raw text logs and summary files are available.
